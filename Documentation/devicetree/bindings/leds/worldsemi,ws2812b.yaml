# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/leds/worldsemi,ws2812b.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: WS2812B LEDs driven using SPI

maintainers:
  - Chuanhong Guo <gch981213@gmail.com>

description: |
  WorldSemi WS2812B is a individually addressable LED chip that can be chained
  together and controlled individually using a single wire.
  This binding describes a chain of WS2812B LEDs connected to the SPI MOSI pin.
  Typical setups includes connecting the data pin of the LED chain to MOSI as
  the only device or using CS and MOSI with a tri-state voltage-level shifter
  for the data pin.
  The SPI frequency needs to be 2.105MHz~2.85MHz for the timing to be correct
  and the controller needs to send all the bytes continuously.

allOf:
  - $ref: /schemas/spi/spi-peripheral-props.yaml#

properties:
  compatible:
    const: worldsemi,ws2812b

  reg:
    maxItems: 1

  spi-max-frequency:
    minimum: 2105000
    maximum: 2850000

  "#address-cells":
    const: 1

  "#size-cells":
    const: 0

patternProperties:
  "^multi-led@[0-9a-f]+$":
    type: object
    $ref: leds-class-multicolor.yaml#
    unevaluatedProperties: false

    properties:
      color-index:
        description: |
          A 3-item array specifying color of each components in this LED. It
          should be one of the LED_COLOR_ID_* prefixed definitions from the
          header include/dt-bindings/leds/common.h. Defaults to
          <LED_COLOR_ID_GREEN LED_COLOR_ID_RED LED_COLOR_ID_BLUE>
          if unspecified.
        $ref: /schemas/types.yaml#/definitions/uint32-array
        maxItems: 3

      reg:
        description: |
          Which LED this node represents. The reg of the first LED on the chain
          is 0.
        maxItems: 1

    required:
      - reg
      - color
      - function

required:
  - compatible

additionalProperties: false

examples:
  - |
    #include <dt-bindings/leds/common.h>
    spi {
        #address-cells = <1>;
        #size-cells = <0>;

        led-controller@0 {
            compatible = "worldsemi,ws2812b";
            reg = <0>;
            #address-cells = <1>;
            #size-cells = <0>;
            spi-max-frequency = <2850000>;
            multi-led@0 {
                reg = <0>;
                color-index = <LED_COLOR_ID_RED LED_COLOR_ID_GREEN LED_COLOR_ID_BLUE>;
                color = <LED_COLOR_ID_RGB>;
                function = LED_FUNCTION_STATUS;
                function-enumerator = <0>;
            };
            multi-led@1 {
                reg = <1>;
                color = <LED_COLOR_ID_RGB>;
                function = LED_FUNCTION_STATUS;
                function-enumerator = <1>;
            };
            multi-led@2 {
                reg = <2>;
                color = <LED_COLOR_ID_RGB>;
                function = LED_FUNCTION_STATUS;
                function-enumerator = <2>;
            };
            multi-led@3 {
                reg = <3>;
                color = <LED_COLOR_ID_RGB>;
                function = LED_FUNCTION_STATUS;
                function-enumerator = <3>;
            };
        };
    };

...
